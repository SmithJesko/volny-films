{% extends 'base.html' %}

{% block content %}
<div class="player">
    <iframe id="player-src" src="{{ url }}" width="85%" height="500px" frameborder="0" allowfullscreen="true" scrolling="no"></iframe>
    <div class="player-info">
        <h2>{{ media.title }}</h2>
        <hr>
        <div class="row">
            <div class="col-md-4">
                <img style="width: 100%;" src="https://image.tmdb.org/t/p/original{{ media.poster }}" alt="Poster" srcset="">
            </div>
            <div class="col-md-8">
                <ul class="list-group">
                    <li class="list-group-item">Genre: {{ media.genre }}</li>
                    <li class="list-group-item">Released: {{ media.release_date }}</li>
                    <li class="list-group-item">Language: {{ media.language }}</li>
                    <li class="list-group-item">IMDB Rating: {{ media.imdb_rating }}</li>
                    <li class="list-group-item">Director: {{ media.director }}</li>
                    <li class="list-group-item">Writer: {{ media.writer }}</li>
                    <li class="list-group-item">Actors: {{ media.actors }}</li>
                </ul>
            </div>
        </div>
        {% if episode_urls %}
            <hr>
            <h4>Other Episodes</h4>
            {% for key, value in episode_urls.items %}
                <button type="button" class="btn btn-dark btn-sm" style="margin: 5px;" onclick="replaceEpisode('{{ value }}')">{{ key }}</button>
            {% endfor %}
        {% endif %}
        <hr>
        <h4>Plot</h4>
        <p>{{ media.plot }}</p>
        <hr>
        <a href="https://imdb.com/title/${movie.imdbID}" target="_blank" class="btn btn-dark">View IMDB</a>
        <a href="/" class="btn btn-dark">Go Back to Home</a>
        <a href="/trouble-playing" class="btn btn-danger">Trouble Playing?</a>
    </div>
</div>
<script>
    function replaceEpisode(url) {
        console.log(url);
        document.getElementById('player-src').src = url;
    }
</script>
{% endblock content %}